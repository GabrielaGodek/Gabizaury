(()=>{"use strict";var e,t={162:(e,t,s)=>{var i=s(260),a=s.n(i);class l extends a().Scene{constructor(){super("preload")}preload(){this.load.tilemapTiledJSON("map","../assets/lvls/lvl1_jungle/lvl1_jungle.json"),this.load.image("tiles_mossy","../assets/lvls/lvl1_jungle/lvl1_Mossy.png"),this.load.image("tiles_mossy_2","../assets/lvls/lvl1_jungle/lv1_Mossy_2.png"),this.load.image("tiles_decoration","../assets/lvls/lvl1_jungle/lvl1_Decoration.png"),this.load.image("tiles_plants","../assets/lvls/lvl1_jungle/lvl1_Hanging Plants.png"),this.load.image("bg","../assets/lvls/lvl1_jungle/jungle_bg.jpg"),this.load.image("player","../assets/player/player_dino.png"),this.load.image("enemy","../assets/player/enemy.png")}create(){this.scene.start("play")}}const h=l;const r=class{constructor(e,t,s,i){this.bar=new(a().GameObjects.Graphics)(e),this.bar.setScrollFactor(0,0),this.x=t,this.y=s,this.health=i,this.healthbar_config={w:250,h:10,x:10,y:10},this.pxPerHealth=this.healthbar_config.w/this.health,e.add.existing(this.bar),this.displayHealthbar(this.healthbar_config.x,this.healthbar_config.y)}takeDamage(e){this.health=e,this.displayHealthbar(this.healthbar_config.x,this.healthbar_config.y)}displayHealthbar(e,t){const{w:s,h:i}=this.healthbar_config;this.bar.clear();const a=Math.floor(this.health*this.pxPerHealth);this.bar.fillStyle(16777215),this.bar.fillRect(e,t,s,i),this.bar.fillStyle(65280),this.bar.fillRect(e,t,a,i)}};class o extends a().Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"player"),e.add.existing(this),e.physics.add.existing(this),this.init()}init(){this.g=500,this.v=200,this.body.setGravityY(this.g),this.setCollideWorldBounds(!0),this.health=100,this.healthbar=new r(this.scene,0,0,this.health),this.cursors=this.scene.input.keyboard.createCursorKeys(),this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}takeHits(e,t){this.health-=t,this.health>0?this.healthbar.takeDamage(this.health):window.location.reload()}update(){const{left:e,right:t,up:s,space:i}=this.cursors;e.isDown?(this.setVelocityX(-this.v),this.setFlipX(!0)):t.isDown?(this.setVelocityX(this.v),this.setFlipX(!1)):this.setVelocityX(0),(i.isDown||s.isDown)&&this.body.onFloor()&&this.setVelocityY(1.75*-this.v)}objectsCollider(e,t){this.scene.physics.add.collider(this,e,t,null,this)}}const n=o;class c extends a().Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"enemy"),e.add.existing(this),e.physics.add.existing(this),this.init()}init(){this.g=500,this.v=50,this.edge=null,this.rayBeam=this.scene.add.graphics({lineStyle:{width:0,color:0}}),this.body.setGravityY(this.g),this.setSize(250,250).setOffset(500,500).setOrigin(.5,1),this.setVelocityX(this.v),this.setCollideWorldBounds(!0),this.setImmovable(!0),this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}objectsCollider(e,t){this.scene.physics.add.collider(this,e,t,null,this)}setPlatformEdge(e){this.edge=e}update(){const{ray:e,ifReachedEdge:t}=this.raycasting(this.body,this.edge);t||(this.setFlipX(!this.flipX),this.setVelocityX(this.v=-this.v)),this.rayBeam.clear(),this.rayBeam.strokeLineShape(e)}bodyPositionDifferenceX=0;prevRay=null;prevHit=null;raycasting(e,t,s=30,i=0){const{x:l,y:h,width:r,halfHeight:o}=e;if(this.bodyPositionDifferenceX+=e.prev.x,Math.abs(this.bodyPositionDifferenceX)<=i&&null!==this.prevHit)return{ray:this.prevRay,ifReachedEdge:this.prevHit};let n=!1;const c=new(a().Geom.Line);e.facing===a().Physics.Arcade.FACING_RIGHT?(c.x1=l+r,c.y1=h+o,c.x2=c.x1+s,c.y2=c.y1+s):e.facing===a().Physics.Arcade.FACING_LEFT&&(c.x1=l,c.y1=h+o,c.x2=c.x1-s,c.y2=c.y1+s);const d=t.getTilesWithinShape(c);return d.length>0&&(n=this.prevHit=d.some((e=>-1!==e.index))),this.prevRay=c,this.bodyPositionDifferenceX=0,{ray:c,ifReachedEdge:n}}}const d=c;class y extends a().Scene{constructor(e){super("play"),this.config=e}create(){const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("mossy","tiles_mossy"),s=e.addTilesetImage("mossy_2","tiles_mossy_2"),i=e.addTilesetImage("decoration","tiles_decoration"),a=e.addTilesetImage("plants","tiles_plants"),l=e.addTilesetImage("collide","tiles_mossy");this.add.image(0,0,"bg").setOrigin(0,0).setDisplaySize(this.config.width+this.config.mapOffset,this.config.height);e.createLayer("platforms",[t,s,i,a]);const h=e.createLayer("collide",l),r=e.getObjectLayer("zones").objects.find((e=>"start"===e.name)),o=e.getObjectLayer("zones").objects.find((e=>"end"===e.name)),n=e.getObjectLayer("enemies");h.setCollisionByExclusion(-1,!0);const c=this.createPlayer(r);c.objectsCollider(h),this.finishLvl(o,c),this.camera(c);this.createEnemy(n,h).forEach((e=>{e.objectsCollider(h),c.objectsCollider(e,this.playerGotDamage)}))}playerGotDamage(e,t,s=200){e.takeHits(e,s)}createPlayer(e){return new n(this,e.x,e.y).setScale(.2)}createEnemy(e,t){return e.objects.map((e=>{const s=new d(this,e.x,e.y).setScale(.08);return s.setPlatformEdge(t),s}))}camera(e){const{width:t,height:s,mapOffset:i}=this.config;this.physics.world.setBounds(0,0,t+i,s),this.cameras.main.setBounds(0,0,t+i,s),this.cameras.main.startFollow(e)}finishLvl(e,t){const s=this.physics.add.sprite(e.x,e.y,"end").setSize(5,this.config.height).setAlpha(0),i=this.physics.add.overlap(t,s,(()=>{i.active=!1,window.location.reload()}))}}const p=y,g=document.body.offsetWidth,f={mapOffset:1600>g?1600-g:0,width:g,height:640},m=[h,p],v=e=>new e(f),b={type:a().AUTO,...f,backgroundColor:"#3a5f4e",physics:{default:"arcade",arcade:{debug:!1}},scene:m.map(v)};new(a().Game)(b)}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var l=s[e]={exports:{}};return t[e].call(l.exports,l,l.exports,i),l.exports}i.m=t,e=[],i.O=(t,s,a,l)=>{if(!s){var h=1/0;for(c=0;c<e.length;c++){for(var[s,a,l]=e[c],r=!0,o=0;o<s.length;o++)(!1&l||h>=l)&&Object.keys(i.O).every((e=>i.O[e](s[o])))?s.splice(o--,1):(r=!1,l<h&&(h=l));if(r){e.splice(c--,1);var n=a();void 0!==n&&(t=n)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[s,a,l]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={143:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,l,[h,r,o]=s,n=0;if(h.some((t=>0!==e[t]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(o)var c=o(i)}for(t&&t(s);n<h.length;n++)l=h[n],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(c)},s=self.webpackChunkphaser_webpack_boilerplate=self.webpackChunkphaser_webpack_boilerplate||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[736],(()=>i(162)));a=i.O(a)})();